<!DOCTYPE html>
<html lang="en">
<head>
    <title>Network</title>
    <script
        type="text/javascript"
        src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <style type="text/css">
        #mynetwork {
            width: 600px;
            height: 60px;
            border: 0px solid lightgray;
        }
    </style>
</head>
<body>
    <div id="mynetwork"></div>
    <script type="text/javascript">
        const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
        })
        console.log(params)  // TODO

        const sup_st = 'ˢᵗ'
        const sup_nd = 'ⁿᵈ'
        const sup_rd = 'ʳᵈ'
        const sup_th = 'ᵗʰ'

        function subscript(n) {
            res = '' + label(n)
            while (n > 0) {
            d = n % 10
            res = String.fromCharCode(8320 + d) + res
            n = Math.trunc(n / 10)
            }
            return res
        }

        const N = params.n
        console.log(N)  // TODO
        function nameEdge(i, j) {
            if (i < j) {
                return N*i + j
            } else if (j < i) {
                return N*j + i
            } else {
                return undefined
            }
        }

        function giveI(n) {
            return Math.trunc(n / nodesNB)
        }

        function giveJ(n) {
            return n % nodesNB
        }
      
        function HSLToHex(h, s, l) {
            const hDecimal = l / 100
            const a = (s * Math.min(hDecimal, 1 - hDecimal)) / 100
            const f = (n) => {
            const k = (n + h / 30) % 12
            const color = hDecimal - a * Math.max(Math.min(k - 3, 9 - k, 1), -1)

            // Convert to Hex and prefix with "0" if required
            return Math.round(255 * color)
                .toString(16)
                .padStart(2, "0")
            }
            return `#${f(0)}${f(8)}${f(4)}`
        }

        function is_even(n) {
            return n%2 == 0
        }

        function is_odd(n) {
            return n%2 != 0
        }

        function label(n) {
            return 1 + (n >> 1)
        }

        function is_black(n) {
            return n%3 == 0
        }

        function is_white(n) {
            return n%3 != 0
        }

        // Create nodes
        var nodes = new vis.DataSet([])
        for (let i = 0; i < N; ++i) {
            switch(i) {
                case N - 1:
                    ord = '...'
                    break
                case 1:
                    ord = '1' + sup_st
                    break
                case 2:
                    ord = '2' + sup_nd
                    break
                case 3:
                    ord = '3' + sup_rd
                    break
                default:
                    ord = '' + i + sup_th
                    break
            }
            nodes.add([
                {
                    id: i,
                    shape: 'circle',
                    widthConstraint: {minimum: 20, maximum: 20},
                    color: is_black(i) ? HSLToHex(0, 0., 50.) : HSLToHex(0, 0., 90.),
                    font: {
                        color: is_white(i) ? HSLToHex(0, 0., 50.) : HSLToHex(0, 0., 90.),
                    },
                    label: ord,
                    x: 30. + 50.*i,
                    y: 30.,
                }
            ])
        }

        // Create edges
        var edges = new vis.DataSet([])
        for (let i = 1; i < N; ++i) {
            edges.add([
                {
                    id: nameEdge(i - 1, i),
                    from: i - 1,
                    to: i,
                    color: HSLToHex(0, 0., 50.),
                    smooth: false,
                    width: 1,
                },
            ])
        }

      // Create a network
      var container = document.getElementById("mynetwork")
      var data = {
        nodes: nodes,
        edges: edges,
      }
      var options = {
        physics: false,
      }
      var network = new vis.Network(container, data, options);
    </script>
  </body>
</html>